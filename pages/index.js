import Head from "next/head"
import Nav from "../components/NavBar"
import Jumbotron from "../components/Jumbotron"
import Search from "../components/Search"
import Row from "../components/Row"
import { useState, useEffect } from "react"

export default function Home() {
  const [searchBar, setSearchBarState] = useState(false)

  const onKeyDown = e => {
    if ((e.metaKey && e.key === "k") || (e.metaKey && e.key === "K")) {
      setSearchBarState(true)
    }
  }

  useEffect(() => {
    document.addEventListener("keydown", onKeyDown)

    return () => {
      document.removeEventListener("keydown", onKeyDown)
    }
  }, [])

  return (
    <div className="bg-gradient-to-br from-violet-900 to-fuchsia-900">
      <Head>
        <title>TDW MP2 Pedro Miguel Pereira</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="bg-black bg-opacity-10">
        {searchBar && <Search setSearchBarState={setSearchBarState} />}
        <Nav setSearchBarState={setSearchBarState} />
        <Jumbotron />
        <Row rowTitle="Em Destaque" type="all" time_window="week" page="1" />
        <Row
          rowTitle="Filmes em destaque"
          type="movie"
          time_window="day"
          page="1"
        />
        <Row
          rowTitle="SÃ©ries em destaque"
          type="tv"
          time_window="day"
          page="1"
        />
        {/* Row */}
      </main>
    </div>
  )
}
